(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[261],{3107:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>w});var s=a(5155),r=a(4432),d=a(800),l=a(7550),o=a(2525),i=a(4229),n=a(5028),c=a(6766),m=a(6874),u=a.n(m),x=a(5695),h=a(2115),b=a(4019),g=a(1204),p=a(6313),y=a(1379),f=a(6050);let j=(0,n.default)(()=>Promise.resolve().then(a.bind(a,800)),{loadableGenerated:{webpack:()=>[null]},ssr:!1});function w(){let e=(0,x.useRouter)(),t=(0,x.useParams)().id,[a,n]=(0,h.useState)(""),[m,w]=(0,h.useState)(""),[v,k]=(0,h.useState)(""),[N,S]=(0,h.useState)(""),[C,P]=(0,h.useState)(""),[A,_]=(0,h.useState)(""),[E,F]=(0,h.useState)("draft"),[D,I]=(0,h.useState)(!0),[B,q]=(0,h.useState)(!1),[O,T]=(0,h.useState)("editor");(0,h.useEffect)(()=>{let a=p.y.onAuthStateChanged(async a=>{if(!a||!p.y.isAdmin(a))return void e.replace("/admin");try{let e=await y.w.getPostById(t);if(!e)throw Error("Post not found");n(e.title),w(e.content),k(e.excerpt),S(e.tags.join(", ")),P(e.featuredImage||""),_(e.featuredImageAlt||""),F(e.status)}catch(t){alert("Failed to load post"),e.replace("/admin/dashboard")}finally{I(!1)}});return()=>a()},[t,e]);let z=async e=>{e.preventDefault(),q(!0);try{await y.w.updatePost(t,{title:a,content:m,excerpt:v,tags:N.split(",").map(e=>e.trim()).filter(Boolean),status:E,updatedAt:new Date}),(0,f.bd)("update_post","Updated post: ".concat(a)),alert("Post updated")}catch(e){alert("Failed to update post")}finally{q(!1)}},M=async()=>{if(confirm("Are you sure you want to delete this post?"))try{await y.w.deletePost(t),(0,f.bd)("delete_post","Deleted post: ".concat(a)),e.replace("/admin/dashboard")}catch(e){alert("Failed to delete post")}};return D?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)(b.A,{size:"lg"})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,s.jsx)("header",{className:"bg-white dark:bg-gray-800 shadow",children:(0,s.jsx)("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex h-16 justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)(u(),{href:"/admin/dashboard",className:"inline-flex items-center gap-2 text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white transition-colors",onClick:()=>(0,f.bd)("navigate_back_to_dashboard","Admin navigated back to dashboard from edit post"),children:[(0,s.jsx)(l.A,{className:"h-4 w-4"}),"Back to Dashboard"]}),(0,s.jsx)("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Edit Post"})]}),(0,s.jsxs)("button",{onClick:M,className:"inline-flex items-center gap-2 rounded-md bg-red-600 px-3 py-2 text-sm font-medium text-white hover:bg-red-700 transition-colors",children:[(0,s.jsx)(o.A,{className:"h-4 w-4"})," Delete"]})]})})}),(0,s.jsxs)("main",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsx)("div",{className:"border-b border-gray-200 dark:border-gray-700",children:(0,s.jsxs)("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[(0,s.jsx)("button",{onClick:()=>T("editor"),className:"".concat("editor"===O?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"),children:"Editor"}),(0,s.jsx)("button",{onClick:()=>T("seo"),className:"".concat("seo"===O?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"),children:"SEO Analysis"})]})})}),"editor"===O&&(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsxs)("form",{onSubmit:z,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg p-6",children:[(0,s.jsx)("h2",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Post Details"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Title"}),(0,s.jsx)("input",{type:"text",id:"title",value:a,onChange:e=>n(e.target.value),required:!0,className:"mt-1 block w-full border border-gray-300 dark:border-gray-600 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"excerpt",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Excerpt"}),(0,s.jsx)("textarea",{id:"excerpt",rows:3,value:v,onChange:e=>k(e.target.value),required:!0,className:"mt-1 block w-full border border-gray-300 dark:border-gray-600 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"tags",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Tags (comma-separated)"}),(0,s.jsx)("input",{type:"text",id:"tags",value:N,onChange:e=>S(e.target.value),className:"mt-1 block w-full border border-gray-300 dark:border-gray-600 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Status"}),(0,s.jsxs)("select",{id:"status",value:E,onChange:e=>F(e.target.value),className:"mt-1 block w-full border border-gray-300 dark:border-gray-600 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[(0,s.jsx)("option",{value:"draft",children:"Draft"}),(0,s.jsx)("option",{value:"published",children:"Published"})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg p-6",children:[(0,s.jsx)("h2",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Content (Markdown)"}),(0,s.jsx)("div",{"data-color-mode":"light",className:"w-full",children:(0,s.jsx)(j,{value:m,onChange:e=>w(null!=e?e:""),height:400,preview:"edit",commands:[d.commands.group([d.commands.title1,d.commands.title2,d.commands.title3,d.commands.title4,d.commands.title5,d.commands.title6],{name:"title",groupName:"title",buttonProps:{"aria-label":"Insert title"}}),d.commands.bold,d.commands.italic,d.commands.strikethrough,d.commands.hr,d.commands.quote,d.commands.code,d.commands.codeBlock,d.commands.link,d.commands.image,d.commands.table,d.commands.divider,d.commands.fullscreen]})})]}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsxs)("button",{type:"submit",disabled:B,className:"inline-flex items-center gap-2 rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 transition-colors disabled:opacity-50",children:[B?(0,s.jsx)(b.A,{size:"sm"}):(0,s.jsx)(i.A,{className:"h-4 w-4"}),B?"Saving...":"Save Changes"]})})]})}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg p-6 lg:h-screen lg:overflow-y-auto",children:[(0,s.jsx)("h2",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Preview"}),C&&(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)(c.default,{src:C,alt:A||"Featured Image",width:800,height:400,className:"rounded-lg object-cover"})}),(0,s.jsx)("article",{className:"prose prose-lg dark:prose-invert max-w-none",children:(0,s.jsx)(g.MarkdownRenderer,{content:m})})]})]}),"seo"===O&&(0,s.jsx)(r.$,{title:a,excerpt:v,slug:t,content:m})]})]})}},9966:(e,t,a)=>{Promise.resolve().then(a.bind(a,3107))}},e=>{var t=t=>e(e.s=t);e.O(0,[96,868,358],()=>t(9966)),_N_E=e.O()}]);